[All Nodes Distance K in Binary Tree - LeetCode](https://leetcode.com/problems/all-nodes-distance-k-in-binary-tree/description/)

## Failed Attempt

Try to find the depth of every node. Then get the node with the depth we want. 

```cpp
class Solution {
public:
    vector<int> distanceK(TreeNode* root, TreeNode* target, int k) {
        unordered_map<TreeNode*, int> depthMap;
        function<void(TreeNode*, int)> find = [&](TreeNode* node, int depth) {
            if(node == nullptr) return;
            depthMap[node] = depth;
            find(node->left, depth + 1);
            find(node->right, depth + 1);
        };
        find(root, 0);
        int tDepth = depthMap[target];
        int depthAbove = abs(k - tDepth);
        int depthBelow = tDepth + k;
        vector<int> res;
        for(auto dPair : depthMap) {
            if((dPair.second == depthAbove || dPair.second == depthBelow) 
		            && dPair.first != target) {
                res.push_back((dPair.first) -> val);
            }
        }
        return res;
    }
};
```

However, with this approach we cannot distinguish if the node is on the same branch as the target. For instance, if we try to find the node below the target in this graph, we will find 3, 4, 5, 6. However, only 5 and 6 are the elements we want to find. 

![[33d1f853ca994a321bdae3764e5ce32.jpg]]