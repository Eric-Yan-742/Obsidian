[All Nodes Distance K in Binary Tree - LeetCode](https://leetcode.com/problems/all-nodes-distance-k-in-binary-tree/description/)

## Failed Attempt

Try to find the depth of every node. Then get the node with the depth we want. 

```cpp
class Solution {
public:
    vector<int> distanceK(TreeNode* root, TreeNode* target, int k) {
        unordered_map<TreeNode*, int> depthMap;
        function<void(TreeNode*, int)> find = [&](TreeNode* node, int depth) {
            if(node == nullptr) return;
            depthMap[node] = depth;
            find(node->left, depth + 1);
            find(node->right, depth + 1);
        };
        find(root, 0);
        int tDepth = depthMap[target];
        int depthAbove = abs(k - tDepth);
        int depthBelow = tDepth + k;
        vector<int> res;
        for(auto dPair : depthMap) {
            if((dPair.second == depthAbove || dPair.second == depthBelow) 
		            && dPair.first != target) {
                res.push_back((dPair.first) -> val);
            }
        }
        return res;
    }
};
```

However, with this approach we cannot distinguish if the node is on the same branch as the target. For instance, when we try to find the node above target in this graph. 

![[d6e8ef128fe2439e9127991b8de3f0c.jpg]]

We will find both 2 and 1 although only 2 is valid.  